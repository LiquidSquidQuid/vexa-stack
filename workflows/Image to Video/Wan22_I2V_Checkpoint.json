{
  "last_node_id": 60,
  "last_link_id": 80,
  "nodes": [
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [50, 50],
      "size": [315, 314],
      "flags": {},
      "order": 0,
      "mode": 0,
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [1, 50], "slot_index": 0},
        {"name": "MASK", "type": "MASK", "links": null}
      ],
      "properties": {"Node name for S&R": "LoadImage"},
      "widgets_values": ["input_image.png", "image"]
    },
    {
      "id": 2,
      "type": "Note",
      "pos": [50, 400],
      "size": [315, 280],
      "flags": {},
      "order": 1,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== CHECKPOINT WORKFLOW v2 ===\n\nüü¢ FULL RUN:\nJust click Queue - everything runs\n\nüü° GENERATION ONLY (safer):\nMute nodes 17,18,19,21,22 (post-process)\n\nüîµ POST-PROCESS ONLY (after crash):\n1. Mute nodes 4-15 (generation)\n2. Unmute node 51 (Load Checkpoint)\n3. Update filename in node 51\n4. RECONNECT: Drag wire from node 51\n   output to node 18 'image' input\n5. Queue Prompt\n\n‚ö†Ô∏è The reconnect step is manual but\nit avoids the red node errors!"],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 3,
      "type": "Note",
      "pos": [400, 50],
      "size": [250, 80],
      "flags": {},
      "order": 2,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== PHASE 1: GENERATION ===\nMute this group to skip generation"],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 4,
      "type": "UNETLoader",
      "pos": [400, 150],
      "size": [315, 58],
      "flags": {},
      "order": 3,
      "mode": 0,
      "outputs": [
        {"name": "MODEL", "type": "MODEL", "links": [2], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "UNETLoader"},
      "widgets_values": ["wan2.2_i2v_high_noise_14B_fp8_scaled.safetensors", "default"],
      "title": "Load Wan2.2 High-Noise Model"
    },
    {
      "id": 5,
      "type": "UNETLoader",
      "pos": [400, 230],
      "size": [315, 58],
      "flags": {},
      "order": 4,
      "mode": 0,
      "outputs": [
        {"name": "MODEL", "type": "MODEL", "links": [3], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "UNETLoader"},
      "widgets_values": ["wan2.2_i2v_low_noise_14B_fp8_scaled.safetensors", "default"],
      "title": "Load Wan2.2 Low-Noise Model"
    },
    {
      "id": 6,
      "type": "VAELoader",
      "pos": [400, 310],
      "size": [315, 58],
      "flags": {},
      "order": 5,
      "mode": 0,
      "outputs": [
        {"name": "VAE", "type": "VAE", "links": [4, 66], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "VAELoader"},
      "widgets_values": ["wan_2.1_vae.safetensors"],
      "title": "Load Wan VAE"
    },
    {
      "id": 7,
      "type": "CLIPLoader",
      "pos": [400, 390],
      "size": [315, 58],
      "flags": {},
      "order": 6,
      "mode": 0,
      "outputs": [
        {"name": "CLIP", "type": "CLIP", "links": [5, 51], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPLoader"},
      "widgets_values": ["umt5_xxl_fp8_e4m3fn_scaled.safetensors", "wan"],
      "title": "Load UMT5 Text Encoder"
    },
    {
      "id": 8,
      "type": "CLIPVisionLoader",
      "pos": [400, 470],
      "size": [315, 58],
      "flags": {},
      "order": 7,
      "mode": 0,
      "outputs": [
        {"name": "CLIP_VISION", "type": "CLIP_VISION", "links": [6], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPVisionLoader"},
      "widgets_values": ["clip_vision_h.safetensors"],
      "title": "Load CLIP Vision"
    },
    {
      "id": 9,
      "type": "CLIPTextEncode",
      "pos": [750, 150],
      "size": [400, 150],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {"name": "clip", "type": "CLIP", "link": 5}
      ],
      "outputs": [
        {"name": "CONDITIONING", "type": "CONDITIONING", "links": [7], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPTextEncode"},
      "widgets_values": ["A beautiful woman with black hair in a ponytail, hime cut hairstyle, freckles on her face, looking at camera, subtle movement, photorealistic, 4k quality, natural lighting, cinematic"],
      "title": "Positive Prompt"
    },
    {
      "id": 10,
      "type": "CLIPTextEncode",
      "pos": [750, 330],
      "size": [400, 100],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {"name": "clip", "type": "CLIP", "link": 51}
      ],
      "outputs": [
        {"name": "CONDITIONING", "type": "CONDITIONING", "links": [8], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPTextEncode"},
      "widgets_values": ["worst quality, blurry, jittery, distorted, watermarks, text, logo, inconsistent motion, morphing, deformed"],
      "title": "Negative Prompt"
    },
    {
      "id": 11,
      "type": "CLIPVisionEncode",
      "pos": [750, 470],
      "size": [315, 58],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {"name": "clip_vision", "type": "CLIP_VISION", "link": 6},
        {"name": "image", "type": "IMAGE", "link": 1}
      ],
      "outputs": [
        {"name": "CLIP_VISION_OUTPUT", "type": "CLIP_VISION_OUTPUT", "links": [9], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPVisionEncode"},
      "title": "Encode Image for Wan"
    },
    {
      "id": 12,
      "type": "WanImageToVideo",
      "pos": [1200, 150],
      "size": [315, 200],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {"name": "positive", "type": "CONDITIONING", "link": 7},
        {"name": "negative", "type": "CONDITIONING", "link": 8},
        {"name": "vae", "type": "VAE", "link": 4},
        {"name": "clip_vision_output", "type": "CLIP_VISION_OUTPUT", "link": 9}
      ],
      "outputs": [
        {"name": "positive", "type": "CONDITIONING", "links": [10], "slot_index": 0},
        {"name": "negative", "type": "CONDITIONING", "links": [11], "slot_index": 1},
        {"name": "latent", "type": "LATENT", "links": [12], "slot_index": 2}
      ],
      "properties": {"Node name for S&R": "WanImageToVideo"},
      "widgets_values": [832, 480, 81, 16],
      "title": "Wan I2V Settings (480p, 81 frames)"
    },
    {
      "id": 13,
      "type": "KSampler",
      "pos": [1200, 400],
      "size": [315, 262],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {"name": "model", "type": "MODEL", "link": 2},
        {"name": "positive", "type": "CONDITIONING", "link": 10},
        {"name": "negative", "type": "CONDITIONING", "link": 11},
        {"name": "latent_image", "type": "LATENT", "link": 12}
      ],
      "outputs": [
        {"name": "LATENT", "type": "LATENT", "links": [13], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "KSampler"},
      "widgets_values": [42, "fixed", 30, 5.0, "euler", "normal", 0.7],
      "title": "High-Noise Sampler (First Pass)"
    },
    {
      "id": 14,
      "type": "KSampler",
      "pos": [1200, 700],
      "size": [315, 262],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {"name": "model", "type": "MODEL", "link": 3},
        {"name": "positive", "type": "CONDITIONING", "link": 10},
        {"name": "negative", "type": "CONDITIONING", "link": 11},
        {"name": "latent_image", "type": "LATENT", "link": 13}
      ],
      "outputs": [
        {"name": "LATENT", "type": "LATENT", "links": [14], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "KSampler"},
      "widgets_values": [42, "fixed", 10, 3.0, "euler", "normal", 0.3],
      "title": "Low-Noise Sampler (Refine Pass)"
    },
    {
      "id": 15,
      "type": "VAEDecode",
      "pos": [1550, 400],
      "size": [210, 46],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {"name": "samples", "type": "LATENT", "link": 14},
        {"name": "vae", "type": "VAE", "link": 66}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [70, 72], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "VAEDecode"},
      "title": "Decode Video"
    },
    {
      "id": 45,
      "type": "Note",
      "pos": [1550, 150],
      "size": [280, 100],
      "flags": {},
      "order": 15,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== CHECKPOINT SAVE ===\n‚ö†Ô∏è Saves raw video BEFORE upscaling\nIf post-processing crashes,\nyour generation is safe here."],
      "color": "#352",
      "bgcolor": "#573"
    },
    {
      "id": 46,
      "type": "VHS_VideoCombine",
      "pos": [1550, 500],
      "size": [315, 290],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 70},
        {"name": "audio", "type": "AUDIO", "link": null},
        {"name": "meta_batch", "type": "VHS_BatchManager", "link": null}
      ],
      "outputs": [
        {"name": "Filenames", "type": "VHS_FILENAMES", "links": null}
      ],
      "properties": {"Node name for S&R": "VHS_VideoCombine"},
      "widgets_values": {
        "frame_rate": 24,
        "loop_count": 0,
        "filename_prefix": "CHECKPOINT_raw",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 17,
        "save_metadata": true
      },
      "title": "üíæ CHECKPOINT: Save Raw Video"
    },
    {
      "id": 50,
      "type": "Note",
      "pos": [1900, 50],
      "size": [300, 150],
      "flags": {},
      "order": 17,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== LOAD FROM CHECKPOINT ===\n\nTo continue from a saved checkpoint:\n1. Mute all PHASE 1 nodes (4-15)\n2. UN-mute this Load node (Ctrl+M)\n3. Set filename to your checkpoint\n4. Drag a wire from this node's\n   IMAGE output ‚Üí node 18 input\n5. Queue Prompt"],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 51,
      "type": "VHS_LoadVideo",
      "pos": [1900, 220],
      "size": [315, 200],
      "flags": {},
      "order": 18,
      "mode": 2,
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": null, "slot_index": 0},
        {"name": "frame_count", "type": "INT", "links": null},
        {"name": "audio", "type": "AUDIO", "links": null},
        {"name": "video_info", "type": "VHS_VIDEOINFO", "links": null}
      ],
      "properties": {"Node name for S&R": "VHS_LoadVideo"},
      "widgets_values": {
        "video": "CHECKPOINT_raw_00001.mp4",
        "force_rate": 0,
        "force_size": "Disabled",
        "custom_width": 512,
        "custom_height": 512,
        "frame_load_cap": 0,
        "skip_first_frames": 0,
        "select_every_nth": 1
      },
      "title": "üìÇ Load Checkpoint (MUTED - unmute to use)"
    },
    {
      "id": 52,
      "type": "Note",
      "pos": [1900, 450],
      "size": [315, 80],
      "flags": {},
      "order": 19,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== PHASE 2: POST-PROCESSING ===\nUpscale ‚Üí Scale ‚Üí Interpolate ‚Üí Save"],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 17,
      "type": "UpscaleModelLoader",
      "pos": [1900, 550],
      "size": [315, 58],
      "flags": {},
      "order": 20,
      "mode": 0,
      "outputs": [
        {"name": "UPSCALE_MODEL", "type": "UPSCALE_MODEL", "links": [16], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "UpscaleModelLoader"},
      "widgets_values": ["RealESRGAN_x4plus.pth"],
      "title": "Load Upscale Model"
    },
    {
      "id": 18,
      "type": "ImageUpscaleWithModel",
      "pos": [1900, 630],
      "size": [315, 58],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {"name": "upscale_model", "type": "UPSCALE_MODEL", "link": 16},
        {"name": "image", "type": "IMAGE", "link": 72}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [17], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "ImageUpscaleWithModel"},
      "title": "‚¨ÜÔ∏è Upscale Video Frames (connect checkpoint here)"
    },
    {
      "id": 19,
      "type": "ImageScaleBy",
      "pos": [1900, 710],
      "size": [315, 82],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [
        {"name": "image", "type": "IMAGE", "link": 17}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [18], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "ImageScaleBy"},
      "widgets_values": ["lanczos", 0.5],
      "title": "Scale Down (4x‚Üí2x final)"
    },
    {
      "id": 21,
      "type": "RIFE VFI",
      "pos": [1900, 820],
      "size": [315, 150],
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {"name": "frames", "type": "IMAGE", "link": 18}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [19], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "RIFE VFI"},
      "widgets_values": ["rife47", 2, true, true, [1.0]],
      "title": "Frame Interpolation (RIFE)"
    },
    {
      "id": 22,
      "type": "VHS_VideoCombine",
      "pos": [2250, 550],
      "size": [315, 290],
      "flags": {},
      "order": 24,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 19},
        {"name": "audio", "type": "AUDIO", "link": null},
        {"name": "meta_batch", "type": "VHS_BatchManager", "link": null}
      ],
      "outputs": [
        {"name": "Filenames", "type": "VHS_FILENAMES", "links": null}
      ],
      "properties": {"Node name for S&R": "VHS_VideoCombine"},
      "widgets_values": {
        "frame_rate": 24,
        "loop_count": 0,
        "filename_prefix": "i2v_FINAL",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true
      },
      "title": "üé¨ FINAL: Save Processed Video"
    },
    {
      "id": 40,
      "type": "PreviewImage",
      "pos": [2250, 150],
      "size": [315, 246],
      "flags": {},
      "order": 25,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 50}
      ],
      "properties": {"Node name for S&R": "PreviewImage"},
      "title": "Preview Input Image"
    },
    {
      "id": 55,
      "type": "Note",
      "pos": [50, 700],
      "size": [650, 300],
      "flags": {},
      "order": 26,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== QUICK REFERENCE ===\n\nüü¢ FULL RUN:\n   ‚Üí Click Queue Prompt\n   ‚Üí Checkpoint saves as CHECKPOINT_raw_00001.mp4\n   ‚Üí Final saves as i2v_FINAL_00001.mp4\n\nüü° GENERATION ONLY (recommended for safety):\n   ‚Üí Mute nodes 17, 18, 19, 21, 22\n   ‚Üí Only generates + saves checkpoint\n\nüîµ POST-PROCESS FROM CHECKPOINT:\n   ‚Üí Mute nodes 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 46\n   ‚Üí Unmute node 51 (Load Checkpoint)\n   ‚Üí Update filename in node 51\n   ‚Üí DELETE the wire going into node 18\n   ‚Üí DRAG new wire: node 51 output ‚Üí node 18 'image' input\n   ‚Üí Queue Prompt\n\n‚ö†Ô∏è PERSIST CHECKPOINTS:\n   cp /workspace/runpod-slim/ComfyUI/output/CHECKPOINT_*.mp4 /workspace/"],
      "color": "#223",
      "bgcolor": "#445"
    },
    {
      "id": 56,
      "type": "Note",
      "pos": [750, 700],
      "size": [650, 300],
      "flags": {},
      "order": 27,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== MODEL DOWNLOADS ===\n\ncd /workspace/runpod-slim/ComfyUI/models\n\n# Wan 2.2 (diffusion_models folder)\nwget -O diffusion_models/wan2.2_i2v_high_noise_14B_fp8_scaled.safetensors \\\n  \"https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/resolve/main/split_files/diffusion_models/wan2.2_i2v_high_noise_14B_fp8_scaled.safetensors\"\n\nwget -O diffusion_models/wan2.2_i2v_low_noise_14B_fp8_scaled.safetensors \\\n  \"https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/resolve/main/split_files/diffusion_models/wan2.2_i2v_low_noise_14B_fp8_scaled.safetensors\"\n\n# VAE + Text Encoder + CLIP Vision\nwget -O vae/wan_2.1_vae.safetensors \"https://hf.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/vae/wan_2.1_vae.safetensors\"\nwget -O text_encoders/umt5_xxl_fp8_e4m3fn_scaled.safetensors \"https://hf.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp8_e4m3fn_scaled.safetensors\"\nwget -O clip_vision/clip_vision_h.safetensors \"https://hf.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/clip_vision/clip_vision_h.safetensors\"\n\n# Upscaler\nwget -O upscale_models/RealESRGAN_x4plus.pth \"https://hf.co/fofr/comfyui/resolve/main/upscale_models/RealESRGAN_x4plus.pth\""],
      "color": "#232",
      "bgcolor": "#454"
    }
  ],
  "links": [
    [1, 1, 0, 11, 1, "IMAGE"],
    [2, 4, 0, 13, 0, "MODEL"],
    [3, 5, 0, 14, 0, "MODEL"],
    [4, 6, 0, 12, 2, "VAE"],
    [5, 7, 0, 9, 0, "CLIP"],
    [51, 7, 0, 10, 0, "CLIP"],
    [6, 8, 0, 11, 0, "CLIP_VISION"],
    [7, 9, 0, 12, 0, "CONDITIONING"],
    [8, 10, 0, 12, 1, "CONDITIONING"],
    [9, 11, 0, 12, 3, "CLIP_VISION_OUTPUT"],
    [10, 12, 0, 13, 1, "CONDITIONING"],
    [11, 12, 1, 13, 2, "CONDITIONING"],
    [12, 12, 2, 13, 3, "LATENT"],
    [13, 13, 0, 14, 3, "LATENT"],
    [14, 14, 0, 15, 0, "LATENT"],
    [66, 6, 0, 15, 1, "VAE"],
    [70, 15, 0, 46, 0, "IMAGE"],
    [72, 15, 0, 18, 1, "IMAGE"],
    [16, 17, 0, 18, 0, "UPSCALE_MODEL"],
    [17, 18, 0, 19, 0, "IMAGE"],
    [18, 19, 0, 21, 0, "IMAGE"],
    [19, 21, 0, 22, 0, "IMAGE"],
    [50, 1, 0, 40, 0, "IMAGE"]
  ],
  "groups": [
    {
      "title": "Input",
      "bounding": [40, 0, 350, 680],
      "color": "#3f789e"
    },
    {
      "title": "PHASE 1: Generation (Mute to skip)",
      "bounding": [390, 0, 1150, 1000],
      "color": "#3a5a8a"
    },
    {
      "title": "CHECKPOINT SAVE",
      "bounding": [1540, 100, 340, 720],
      "color": "#4a7a4a"
    },
    {
      "title": "PHASE 2: Post-Processing",
      "bounding": [1890, 0, 700, 1000],
      "color": "#7a4a7a"
    },
    {
      "title": "Reference",
      "bounding": [40, 680, 1400, 350],
      "color": "#6a6a4a"
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.5,
      "offset": [0, 0]
    }
  },
  "version": 0.4
}
