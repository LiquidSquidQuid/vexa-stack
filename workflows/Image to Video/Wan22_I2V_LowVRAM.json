{
  "last_node_id": 60,
  "last_link_id": 80,
  "nodes": [
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [50, 50],
      "size": [315, 314],
      "flags": {},
      "order": 0,
      "mode": 0,
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [1, 50], "slot_index": 0},
        {"name": "MASK", "type": "MASK", "links": null}
      ],
      "properties": {"Node name for S&R": "LoadImage"},
      "widgets_values": ["input_image.png", "image"]
    },
    {
      "id": 2,
      "type": "Note",
      "pos": [50, 400],
      "size": [315, 280],
      "flags": {},
      "order": 1,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== LOW VRAM SINGLE-PASS ===\n\n‚úÖ Uses ONE model instead of two\n‚úÖ ~7GB less VRAM usage\n‚úÖ Should handle 81 frames on 24GB\n\n‚ö†Ô∏è Slightly lower quality than\ndual-pass, but much more stable\n\n=== MODES ===\nüü¢ FULL RUN: Just queue\nüü° GEN ONLY: Mute post-process nodes\nüîµ POST ONLY: Mute gen, unmute loader,\n   rewire node 51 ‚Üí node 18"],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 3,
      "type": "Note",
      "pos": [400, 50],
      "size": [250, 80],
      "flags": {},
      "order": 2,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== SINGLE-PASS GENERATION ===\nOne model, lower VRAM, faster"],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 4,
      "type": "UNETLoader",
      "pos": [400, 150],
      "size": [315, 58],
      "flags": {},
      "order": 3,
      "mode": 0,
      "outputs": [
        {"name": "MODEL", "type": "MODEL", "links": [2], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "UNETLoader"},
      "widgets_values": ["wan2.2_i2v_high_noise_14B_fp8_scaled.safetensors", "default"],
      "title": "Load Wan2.2 Model (Single)"
    },
    {
      "id": 6,
      "type": "VAELoader",
      "pos": [400, 230],
      "size": [315, 58],
      "flags": {},
      "order": 4,
      "mode": 0,
      "outputs": [
        {"name": "VAE", "type": "VAE", "links": [4, 66], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "VAELoader"},
      "widgets_values": ["wan_2.1_vae.safetensors"],
      "title": "Load Wan VAE"
    },
    {
      "id": 7,
      "type": "CLIPLoader",
      "pos": [400, 310],
      "size": [315, 58],
      "flags": {},
      "order": 5,
      "mode": 0,
      "outputs": [
        {"name": "CLIP", "type": "CLIP", "links": [5, 51], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPLoader"},
      "widgets_values": ["umt5_xxl_fp8_e4m3fn_scaled.safetensors", "wan"],
      "title": "Load UMT5 Text Encoder"
    },
    {
      "id": 8,
      "type": "CLIPVisionLoader",
      "pos": [400, 390],
      "size": [315, 58],
      "flags": {},
      "order": 6,
      "mode": 0,
      "outputs": [
        {"name": "CLIP_VISION", "type": "CLIP_VISION", "links": [6], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPVisionLoader"},
      "widgets_values": ["clip_vision_h.safetensors"],
      "title": "Load CLIP Vision"
    },
    {
      "id": 9,
      "type": "CLIPTextEncode",
      "pos": [750, 150],
      "size": [400, 150],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {"name": "clip", "type": "CLIP", "link": 5}
      ],
      "outputs": [
        {"name": "CONDITIONING", "type": "CONDITIONING", "links": [7], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPTextEncode"},
      "widgets_values": ["A beautiful woman with black hair in a ponytail, hime cut hairstyle, freckles on her face, looking at camera, subtle movement, photorealistic, 4k quality, natural lighting, cinematic"],
      "title": "Positive Prompt"
    },
    {
      "id": 10,
      "type": "CLIPTextEncode",
      "pos": [750, 330],
      "size": [400, 100],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {"name": "clip", "type": "CLIP", "link": 51}
      ],
      "outputs": [
        {"name": "CONDITIONING", "type": "CONDITIONING", "links": [8], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPTextEncode"},
      "widgets_values": ["worst quality, blurry, jittery, distorted, watermarks, text, logo, inconsistent motion, morphing, deformed"],
      "title": "Negative Prompt"
    },
    {
      "id": 11,
      "type": "CLIPVisionEncode",
      "pos": [750, 470],
      "size": [315, 58],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {"name": "clip_vision", "type": "CLIP_VISION", "link": 6},
        {"name": "image", "type": "IMAGE", "link": 1}
      ],
      "outputs": [
        {"name": "CLIP_VISION_OUTPUT", "type": "CLIP_VISION_OUTPUT", "links": [9], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPVisionEncode"},
      "title": "Encode Image for Wan"
    },
    {
      "id": 12,
      "type": "WanImageToVideo",
      "pos": [1200, 150],
      "size": [315, 200],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {"name": "positive", "type": "CONDITIONING", "link": 7},
        {"name": "negative", "type": "CONDITIONING", "link": 8},
        {"name": "vae", "type": "VAE", "link": 4},
        {"name": "clip_vision_output", "type": "CLIP_VISION_OUTPUT", "link": 9}
      ],
      "outputs": [
        {"name": "positive", "type": "CONDITIONING", "links": [10], "slot_index": 0},
        {"name": "negative", "type": "CONDITIONING", "links": [11], "slot_index": 1},
        {"name": "latent", "type": "LATENT", "links": [12], "slot_index": 2}
      ],
      "properties": {"Node name for S&R": "WanImageToVideo"},
      "widgets_values": [832, 480, 81, 16],
      "title": "Wan I2V (480p, 81 frames)"
    },
    {
      "id": 13,
      "type": "KSampler",
      "pos": [1200, 400],
      "size": [315, 262],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {"name": "model", "type": "MODEL", "link": 2},
        {"name": "positive", "type": "CONDITIONING", "link": 10},
        {"name": "negative", "type": "CONDITIONING", "link": 11},
        {"name": "latent_image", "type": "LATENT", "link": 12}
      ],
      "outputs": [
        {"name": "LATENT", "type": "LATENT", "links": [14], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "KSampler"},
      "widgets_values": [42, "fixed", 30, 5.0, "euler", "normal", 1.0],
      "title": "Single-Pass Sampler (30 steps)"
    },
    {
      "id": 15,
      "type": "VAEDecode",
      "pos": [1200, 700],
      "size": [210, 46],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {"name": "samples", "type": "LATENT", "link": 14},
        {"name": "vae", "type": "VAE", "link": 66}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [70, 72], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "VAEDecode"},
      "title": "Decode Video"
    },
    {
      "id": 45,
      "type": "Note",
      "pos": [1450, 150],
      "size": [280, 100],
      "flags": {},
      "order": 13,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== CHECKPOINT ===\nSaves raw video BEFORE upscaling\nIf post-processing OOMs,\nyour generation is still safe!"],
      "color": "#352",
      "bgcolor": "#573"
    },
    {
      "id": 46,
      "type": "VHS_VideoCombine",
      "pos": [1450, 270],
      "size": [315, 290],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 70},
        {"name": "audio", "type": "AUDIO", "link": null},
        {"name": "meta_batch", "type": "VHS_BatchManager", "link": null}
      ],
      "outputs": [
        {"name": "Filenames", "type": "VHS_FILENAMES", "links": null}
      ],
      "properties": {"Node name for S&R": "VHS_VideoCombine"},
      "widgets_values": {
        "frame_rate": 24,
        "loop_count": 0,
        "filename_prefix": "CHECKPOINT_raw",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 17,
        "save_metadata": true
      },
      "title": "üíæ CHECKPOINT: Save Raw Video"
    },
    {
      "id": 50,
      "type": "Note",
      "pos": [1450, 600],
      "size": [300, 120],
      "flags": {},
      "order": 15,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== LOAD FROM CHECKPOINT ===\nTo continue from crash:\n1. Mute gen nodes (4,6,7,8,9,10,11,12,13,15,46)\n2. Unmute this Load node\n3. Rewire: node 51 ‚Üí node 18"],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 51,
      "type": "VHS_LoadVideo",
      "pos": [1450, 740],
      "size": [315, 200],
      "flags": {},
      "order": 16,
      "mode": 2,
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": null, "slot_index": 0},
        {"name": "frame_count", "type": "INT", "links": null},
        {"name": "audio", "type": "AUDIO", "links": null},
        {"name": "video_info", "type": "VHS_VIDEOINFO", "links": null}
      ],
      "properties": {"Node name for S&R": "VHS_LoadVideo"},
      "widgets_values": {
        "video": "CHECKPOINT_raw_00001.mp4",
        "force_rate": 0,
        "force_size": "Disabled",
        "custom_width": 512,
        "custom_height": 512,
        "frame_load_cap": 0,
        "skip_first_frames": 0,
        "select_every_nth": 1
      },
      "title": "üìÇ Load Checkpoint (MUTED)"
    },
    {
      "id": 52,
      "type": "Note",
      "pos": [1800, 50],
      "size": [315, 80],
      "flags": {},
      "order": 17,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== POST-PROCESSING ===\nUpscale ‚Üí Scale ‚Üí RIFE ‚Üí Save"],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 17,
      "type": "UpscaleModelLoader",
      "pos": [1800, 150],
      "size": [315, 58],
      "flags": {},
      "order": 18,
      "mode": 0,
      "outputs": [
        {"name": "UPSCALE_MODEL", "type": "UPSCALE_MODEL", "links": [16], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "UpscaleModelLoader"},
      "widgets_values": ["RealESRGAN_x4plus.pth"],
      "title": "Load Upscale Model"
    },
    {
      "id": 18,
      "type": "ImageUpscaleWithModel",
      "pos": [1800, 230],
      "size": [315, 58],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {"name": "upscale_model", "type": "UPSCALE_MODEL", "link": 16},
        {"name": "image", "type": "IMAGE", "link": 72}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [17], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "ImageUpscaleWithModel"},
      "title": "‚¨ÜÔ∏è Upscale (rewire checkpoint here)"
    },
    {
      "id": 19,
      "type": "ImageScaleBy",
      "pos": [1800, 310],
      "size": [315, 82],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {"name": "image", "type": "IMAGE", "link": 17}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [18], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "ImageScaleBy"},
      "widgets_values": ["lanczos", 0.5],
      "title": "Scale Down (4x‚Üí2x)"
    },
    {
      "id": 21,
      "type": "RIFE VFI",
      "pos": [1800, 420],
      "size": [315, 150],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {"name": "frames", "type": "IMAGE", "link": 18}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [19], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "RIFE VFI"},
      "widgets_values": ["rife47", 2, true, true, [1.0]],
      "title": "RIFE 2x Interpolation"
    },
    {
      "id": 22,
      "type": "VHS_VideoCombine",
      "pos": [1800, 600],
      "size": [315, 290],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 19},
        {"name": "audio", "type": "AUDIO", "link": null},
        {"name": "meta_batch", "type": "VHS_BatchManager", "link": null}
      ],
      "outputs": [
        {"name": "Filenames", "type": "VHS_FILENAMES", "links": null}
      ],
      "properties": {"Node name for S&R": "VHS_VideoCombine"},
      "widgets_values": {
        "frame_rate": 24,
        "loop_count": 0,
        "filename_prefix": "i2v_FINAL",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true
      },
      "title": "üé¨ FINAL OUTPUT"
    },
    {
      "id": 40,
      "type": "PreviewImage",
      "pos": [2150, 150],
      "size": [315, 246],
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 50}
      ],
      "properties": {"Node name for S&R": "PreviewImage"},
      "title": "Preview Input"
    },
    {
      "id": 55,
      "type": "Note",
      "pos": [50, 700],
      "size": [500, 250],
      "flags": {},
      "order": 24,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== VRAM COMPARISON ===\n\nDUAL-PASS (original):\n‚Ä¢ 2x 14B models = ~13GB+ VRAM\n‚Ä¢ Often OOMs at 81 frames on 24GB\n\nSINGLE-PASS (this workflow):\n‚Ä¢ 1x 14B model = ~7GB VRAM\n‚Ä¢ Should handle 81 frames fine\n‚Ä¢ ~90% of dual-pass quality\n\n=== IF STILL OOM ===\n‚Ä¢ Reduce frames: 81 ‚Üí 49 ‚Üí 33\n‚Ä¢ Reduce resolution: 832x480 ‚Üí 640x368\n‚Ä¢ Mute RIFE (saves ~2GB during post)\n‚Ä¢ Mute upscaler (do upscale separately)"],
      "color": "#223",
      "bgcolor": "#445"
    },
    {
      "id": 56,
      "type": "Note",
      "pos": [600, 700],
      "size": [500, 250],
      "flags": {},
      "order": 25,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== OUTPUT DURATION ===\n\n81 frames @ 24fps:\n‚Ä¢ Raw: 3.4 seconds\n‚Ä¢ After RIFE 2x: 6.75 seconds\n‚Ä¢ After RIFE 4x: 13.5 seconds\n\n49 frames @ 24fps:\n‚Ä¢ Raw: 2 seconds\n‚Ä¢ After RIFE 2x: 4 seconds\n‚Ä¢ After RIFE 4x: 8 seconds\n\n33 frames @ 24fps:\n‚Ä¢ Raw: 1.4 seconds\n‚Ä¢ After RIFE 2x: 2.75 seconds\n‚Ä¢ After RIFE 4x: 5.5 seconds"],
      "color": "#232",
      "bgcolor": "#454"
    },
    {
      "id": 57,
      "type": "Note",
      "pos": [1150, 700],
      "size": [250, 250],
      "flags": {},
      "order": 26,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": ["=== PERSIST FILES ===\n\nAfter generation:\n\ncp /workspace/runpod-slim/ComfyUI/output/CHECKPOINT_*.mp4 /workspace/\n\nThis saves to network\nvolume so files survive\npod restarts!"],
      "color": "#322",
      "bgcolor": "#544"
    }
  ],
  "links": [
    [1, 1, 0, 11, 1, "IMAGE"],
    [2, 4, 0, 13, 0, "MODEL"],
    [4, 6, 0, 12, 2, "VAE"],
    [5, 7, 0, 9, 0, "CLIP"],
    [51, 7, 0, 10, 0, "CLIP"],
    [6, 8, 0, 11, 0, "CLIP_VISION"],
    [7, 9, 0, 12, 0, "CONDITIONING"],
    [8, 10, 0, 12, 1, "CONDITIONING"],
    [9, 11, 0, 12, 3, "CLIP_VISION_OUTPUT"],
    [10, 12, 0, 13, 1, "CONDITIONING"],
    [11, 12, 1, 13, 2, "CONDITIONING"],
    [12, 12, 2, 13, 3, "LATENT"],
    [14, 13, 0, 15, 0, "LATENT"],
    [66, 6, 0, 15, 1, "VAE"],
    [70, 15, 0, 46, 0, "IMAGE"],
    [72, 15, 0, 18, 1, "IMAGE"],
    [16, 17, 0, 18, 0, "UPSCALE_MODEL"],
    [17, 18, 0, 19, 0, "IMAGE"],
    [18, 19, 0, 21, 0, "IMAGE"],
    [19, 21, 0, 22, 0, "IMAGE"],
    [50, 1, 0, 40, 0, "IMAGE"]
  ],
  "groups": [
    {
      "title": "Input",
      "bounding": [40, 0, 350, 680],
      "color": "#3f789e"
    },
    {
      "title": "Generation (Single-Pass)",
      "bounding": [390, 0, 850, 800],
      "color": "#3a5a8a"
    },
    {
      "title": "Checkpoint",
      "bounding": [1440, 100, 340, 880],
      "color": "#4a7a4a"
    },
    {
      "title": "Post-Processing",
      "bounding": [1790, 0, 350, 920],
      "color": "#7a4a7a"
    },
    {
      "title": "Reference",
      "bounding": [40, 680, 1380, 300],
      "color": "#6a6a4a"
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.6,
      "offset": [0, 0]
    }
  },
  "version": 0.4
}
